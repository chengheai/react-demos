<!DOCTYPE html>
<html lang="en">
<!-- 原生js实现dispatch 函数 -->

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div id="title">标题</div>
  <div id="content">内容</div>
  <script>
    // state中的状态渲染到页面中
    var render = function () {
      document.getElementById('title').innerHTML = state.title
      document.getElementById('content').innerHTML = state.content
    }
    // 应用状态
    var state = {
      title: '这是标题',
      content: '这是内容',
    }
    // 改变状态的唯一方法
    var setState = function (newState) {
      state = {
        ...state,
        ...newState
      }
      render()
    }
    // 分发函数 只能接受预定的动作，对state进行预定的修改
    // dispatch 执行setState
    var dispatch = function (action) { // action 是一个普通的对象
      switch (action.type) {
        case "CHANGE_TITLE":
          setState({
            title: action.newTitle
          })
          break;
        default: break
      }
    }
    dispatch({
      type: 'CHANGE_TITLE',
      newTitle: 'this is new title'
    })

    // 初始化
    render()
  </script>
</body>

</html>